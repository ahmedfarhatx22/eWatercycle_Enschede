

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1.3. Running the model &#8212; CATCHMENT HYDROLOGY AND SURFACE WATER_Enschede</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/exercise.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.5ea377869091fd0449014c60fc090103.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script async="async" kind="hypothesis" src="https://hypothes.is/embed.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Semmus_Scope/Running the model';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.4. Contributing guide" href="Contributing%20guide.html" />
    <link rel="prev" title="1.2. Getting started" href="Getting%20started.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">CATCHMENT HYDROLOGY AND SURFACE WATER_Enschede</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Introduction book
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="Semmus_Scope1.html">1. Semmus_Scope (Soil-Plant Model)</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Introduction.html">1.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Getting%20started.html">1.2. Getting started</a></li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#">1.3. Running the model</a></li>
<li class="toctree-l2"><a class="reference internal" href="Contributing%20guide.html">1.4. Contributing guide</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../PySemmusScope/PySemmusScope1.html">2. PySemmusScope (Python package for preprocessing model input data for 170 FLuxnet sites)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../PySemmusScope/Running%20the%20STEMMUS_SCOPE%20model%20on%20a%20system.html">2.1. Running the STEMMUS_SCOPE model on a system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../PySemmusScope/Running%20the%20STEMMUS_SCOPE%20with%20different%20datasets.html">2.2. Running the STEMMUS_SCOPE with different datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../PySemmusScope/Basic%20Model%20Interface.html">2.3. Basic Model Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../PySemmusScope/Contribution%20guide.html">2.4. Contribution guide</a></li>
</ul>
</details></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../Zampy/Zampy1.html">3. Zampy (Python package for preprocessing model input data for any location on Earth)</a><details><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/Getting%20started.html">3.1. Getting started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/Configuration.html">3.2. Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/Available%20datasets.html">3.3. Available datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/Available%20recipes.html">3.4. Available recipes</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/For%20developers.html">3.5. For developers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../Zampy/Contributing%20guide.html">3.6. Contributing guide</a></li>
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="../bibliography.html">4. References</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/Semmus_Scope/Running the model.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Running the model</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-of-stemmus-scope">1.3.1. Workflow of STEMMUS_SCOPE</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-workflow-of-running-the-model">1.3.2. Example workflow of running the model</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="running-the-model">
<span id="running-model"></span><h1><span class="section-number">1.3. </span>Running the model<a class="headerlink" href="#running-the-model" title="Permalink to this heading">#</a></h1>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The instructions below are meant for users who want to run the model. If you want to add changes to the model, see the documentation on “Contributing guide”.</p>
</div>
<section id="workflow-of-stemmus-scope">
<h2><span class="section-number">1.3.1. </span>Workflow of STEMMUS_SCOPE<a class="headerlink" href="#workflow-of-stemmus-scope" title="Permalink to this heading">#</a></h2>
<p>The model reads the forcing file associated with the specified site/location, e.g., <code class="docutils literal notranslate"><span class="pre">FI-Hyy_1996-2014_FLUXNET2015_Met.nc</span></code> from “ForcingPath” and extracts forcing variables in <code class="docutils literal notranslate"><span class="pre">.dat</span></code> format. The <code class="docutils literal notranslate"><span class="pre">.dat</span></code> files are stored in the <code class="docutils literal notranslate"><span class="pre">InputPath</span></code> directory. In addition, the model reads the site information i.e. the location and vegetation parameters.
The model runs step by step until the whole simulation period is completed i.e till the last time step of the forcing data.
The results are saved as binary files temporarily. Then, the binary files are converted to <code class="docutils literal notranslate"><span class="pre">.csv</span></code> files and stored in a <code class="docutils literal notranslate"><span class="pre">sitename_timestamped</span></code> output directory under <code class="docutils literal notranslate"><span class="pre">OutputPath</span></code>.</p>
<div class="dropdown tip admonition">
<p class="admonition-title">Run the model with MATLAB</p>
<div class="dropdown admonition">
<p class="admonition-title">Local device</p>
<p>If you have <a class="reference external" href="https://nl.mathworks.com/products/matlab.html">MATLAB</a> installed on your device, you can run the model by passing config file path to the variable <code class="docutils literal notranslate"><span class="pre">CFG</span></code> in the main script <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE.m</span></code>.</p>
<p>As an alternative, you can run the main script using MATLAB command line in a terminal:</br>
<code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">src/</span></code> </br>
<code class="docutils literal notranslate"><span class="pre">matlab</span> <span class="pre">-nodisplay</span> <span class="pre">-nosplash</span> <span class="pre">-nodesktop</span> <span class="pre">-r</span> <span class="pre">&quot;run('STEMMUS_SCOPE.m');exit;&quot;</span></code></p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">CRIB</p>
<p>To open MATLAB desktop on CRIB, click on the <code class="docutils literal notranslate"><span class="pre">Remote</span> <span class="pre">Desktop</span></code> in the Launcher. Click on the <code class="docutils literal notranslate"><span class="pre">Applications</span></code>. You will find the ‘MATLAB’ software under the <code class="docutils literal notranslate"><span class="pre">Research</span></code>. After clicking on ‘MATLAB’, it asks for your account information that is connected to a MATLAB license. Then, you can run the model by passing config file path to the variable <code class="docutils literal notranslate"><span class="pre">CFG</span></code> in the main script <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE.m</span></code>.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Snellius</p>
<p>In order to use MATLAB, you need to send a request to add you to the user pool on Snellius. Then, pass config file path to the variable <code class="docutils literal notranslate"><span class="pre">CFG</span></code> in the main script <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE.m</span></code>. To run the main script <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE.m</span></code> using MATLAB command line in a terminal on a <strong>compute node</strong>:</p>
<pre>
module load 2023 
module load MATLAB/2023a-upd4` 
cd src/ 
matlab -nodisplay -nosplash -nodesktop -r "run('STEMMUS_SCOPE.m');exit;"
</pre> 
<p>To submit a job to a compute node, see instructions <a class="reference external" href="https://servicedesk.surf.nl/wiki/spaces/WIKI/pages/30660234/Example+job+scripts">here</a>.</p>
</div>
</div>
<div class="dropdown tip admonition">
<p class="admonition-title">Run the model with MATLAB Runtime</p>
<div class="dropdown admonition">
<p class="admonition-title">Local device</p>
<p>If you want to run the model as a standalone application, you need <a class="reference external" href="https://nl.mathworks.com/products/compiler/matlab-runtime.html">MATLAB Runtime</a> version <code class="docutils literal notranslate"><span class="pre">2023a</span></code>. You don’t need a license for MATLAB Runtime. Note that the version of the MATLAB Runtime is tied to the version of MATLAB. The executable file works on the operating system on which the file is created. The file <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE</span></code> under <code class="docutils literal notranslate"><span class="pre">exe</span></code> directory is an executable file of STEMMUS_SCOPE that is created using MATLAB version <code class="docutils literal notranslate"><span class="pre">2023a</span></code> in a <strong>Linux system</strong>.</p>
<p>Make sure <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> is set correctly, in a terminal:</p>
<pre> export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/MATLAB/MATLAB_Runtime/v2023a/runtime/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/bin/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/sys/os/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/sys/opengl/lib/glnxa64 </pre>
<p>Change <code class="docutils literal notranslate"><span class="pre">/usr/local/MATLAB/MATLAB_Runtime/v2023a</span></code> to the path where MATLAB Runtime is installed.</p>
<p>Then, you can run the model in a terminal:</p>
<pre> ./STEMMUS_SCOPE/exe/STEMMUS_SCOPE config_file_template.txt </pre>
</div>
<div class="dropdown admonition">
<p class="admonition-title">CRIB</p>
<p>On CRIB, MATLAB Runtime <a class="reference external" href="https://nl.mathworks.com/products/compiler/matlab-runtime.html">MATLAB Runtime</a> is not available. Contact the system administrator for more information.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Snellius</p>
<p><a class="reference external" href="https://nl.mathworks.com/products/compiler/matlab-runtime.html">MATLAB Runtime</a> is available on Snellius. You can run the model by passing the path of the config file in a terminal on a <strong>compute node</strong>:</p>
<pre> 
module load 2023
module load MATLAB/2023a-upd4
./STEMMUS_SCOPE/exe/STEMMUS_SCOPE config_file_snellius.txt </pre>
<p>Note that you don’t need to set <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> on Snellius. To submit a job to a compute node, see instructions <a class="reference external" href="https://servicedesk.surf.nl/wiki/spaces/WIKI/pages/30660234/Example+job+scripts">here</a>.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">BMI interface</p>
<p>You can run the model using the <a class="reference external" href="https://bmi.csdms.io/en/stable/">BMI</a> interface. The BMI interface is available in the script <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE_exe.m</span></code>. For that, you need <a class="reference external" href="https://nl.mathworks.com/products/compiler/matlab-runtime.html">MATLAB Runtime</a> version <code class="docutils literal notranslate"><span class="pre">2023a</span></code>. You don’t need a license for MATLAB Runtime. Note that the version of the MATLAB Runtime is tied to the version of MATLAB. The executable file works on the operating system on which the file is created. The file <code class="docutils literal notranslate"><span class="pre">STEMMUS_SCOPE</span></code> under <code class="docutils literal notranslate"><span class="pre">exe</span></code> directory is an executable file of STEMMUS_SCOPE that is created using MATLAB version <code class="docutils literal notranslate"><span class="pre">2023a</span></code> in a <strong>Linux system</strong>.</p>
<p>Make sure <code class="docutils literal notranslate"><span class="pre">LD_LIBRARY_PATH</span></code> is set correctly, in a terminal:</p>
<pre> export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/MATLAB/MATLAB_Runtime/v2023a/runtime/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/bin/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/sys/os/glnxa64:/usr/local/MATLAB/MATLAB_Runtime/v2023a/sys/opengl/lib/glnxa64 </pre>
<p>Change <code class="docutils literal notranslate"><span class="pre">/usr/local/MATLAB/MATLAB_Runtime/v2023a</span></code> to the path where MATLAB Runtime is installed.</p>
<p>To enter the BMI mode:</p>
<pre> 
./STEMMUS_SCOPE/exe/STEMMUS_SCOPE "" bmi
</pre>
<p>Now, BMI asks you to select one of the steps “initialize”, “update” or “finalize”. To initialize the model using a config file, type:</p>
<pre>
initialize "path/to/config_file_template.txt"
</pre>
<p>Change <code class="docutils literal notranslate"><span class="pre">path/to/config_file_template.txt</span></code> to the actual path of the config file.</p>
</div>
</div>
<div class="dropdown tip admonition">
<p class="admonition-title">Run the model with Octave</p>
<div class="dropdown admonition">
<p class="admonition-title">Local device</p>
<p>If you want to run the model for a small time period or tests purpose, you can use <a class="reference external" href="https://octave.org/">Octave</a>. Allmost all funcationalities of STEMMUS_SCOPE are compatible with Octave, but the execution time is longer than MATLAB. After Octave installation, launch octave and install the following Octave packages:</p>
<pre>
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/io-2.6.4.tar.gz"
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/statistics-1.4.3.tar.gz"
</pre>
<p>Then, pass config file path to the variable CFG in the main script STEMMUS_SCOPE.m. Run the model in a terminal:</p>
<pre>
cd src/
octave.bat --no-gui --interactive --silent --eval "STEMMUS_SCOPE"
</pre>
<p>On a Unix system, use octave instead of octave.bat.</p>
<div class="dropdown warning admonition">
<p class="admonition-title">Octave from source</p>
<p>Note that Octave on many Linux distributions might be too old so we need to compile it ourselves. See <a class="reference external" href="https://wiki.octave.org/Building">https://wiki.octave.org/Building</a>. Here are build instructions for Ubuntu 22.04:</p>
<pre>
sudo apt update
# install minimal deps, see https://wiki.octave.org/Octave_for_Debian_systems#The_right_way for all dependencies
sudo apt install -yq wget build-essential gfortran liblapack-dev libblas-dev libpcre3-dev libreadline-dev libnetcdf-dev
wget https://mirror.serverion.com/gnu/octave/octave-7.2.0.tar.gz  # or download from local mirror at https://ftpmirror.gnu.org/octave
tar -zxf octave-7.2.0.tar.gz
cd octave-7.2.0
./configure --prefix=/opt/octave
make -j 6
sudo make install
</pre>
<p>Add <code class="docutils literal notranslate"><span class="pre">/opt/octave/bin</span></code> to PATH environment variable.</p>
<pre>
export PATH=$PATH:/opt/octave/bin
</pre>
<p>Launch Octave and install Octave dependencies with:</p>
<pre>
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/io-2.6.4.tar.gz"
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/statistics-1.4.3.tar.gz"
</pre>
</div>
</div>
<div class="docutils">
<div class="dropdown admonition">
<p class="admonition-title">CRIB</p>
<p>On CRIB, you can use <a class="reference external" href="https://octave.org/">Octave</a>. Allmost all funcationalities of STEMMUS_SCOPE are compatible with Octave, but the execution time is longer than MATLAB. After Octave installation, launch octave and install the following Octave packages:</p>
<pre>
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/io-2.6.4.tar.gz"
pkg install "https://downloads.sourceforge.net/project/octave/Octave%20Forge%20Packages/Individual%20Package%20Releases/statistics-1.4.3.tar.gz"
</pre>
<p>Then, pass config file path to the variable CFG in the main script STEMMUS_SCOPE.m. Run the model in a terminal:</p>
<pre>
octave.bat --no-gui --interactive --silent --eval "STEMMUS_SCOPE"
</pre>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Snellius</p>
<p>Since Octave is very slow, it is not recommended to run the model on Snellius using Octave. Use MATLAB Runtime instead.</p>
</div>
</div>
<div class="dropdown tip admonition">
<p class="admonition-title">Run the model with Docker</p>
<div class="dropdown admonition">
<p class="admonition-title">Local device</p>
<p>If you have <a class="reference external" href="https://www.docker.com/">Docker</a> installed on your device, you can run the model using the docker image <code class="docutils literal notranslate"><span class="pre">ecoextreml/stemmus_scope</span></code> and <a class="reference external" href="https://bmi.csdms.io/en/stable/">BMI</a> interface. The docker image is available on <a class="reference external" href="https://github.com/EcoExtreML/STEMMUS_SCOPE/pkgs/container/stemmus_scope">EcoExtreML</a>. You can pull the latest image using the following command:</p>
<pre>
docker pull ghcr.io/ecoextreml/stemmus_scope:latest
</pre>
<p>Then, mount the directories and run the model in a terminal:</p>
<pre>
docker run -u $(id -u):$(id -g) -v /path_to_input_folder:/path_to_input_folder -v /path_to_output_folder:/path_to_output_folder -it ghcr.io/ecoextreml/stemmus_scope:latest
</pre>
<p>With <code class="docutils literal notranslate"><span class="pre">-it</span></code> option, you can enter the docker interactive mode. Now, BMI asks you to select one of the steps “initialize”, “update” or “finalize”. To initialize the model using a config file, type:</p>
<pre>
initialize "path/to/config_file_template.txt"
</pre>
<p>Make sure that the input and output directories are mounted correctly and <code class="docutils literal notranslate"><span class="pre">config_file_template.txt</span></code> is available in the input directory. Also, remove the container after running the model:</p>
<pre>
docker rm container_id
</pre>
</div>
<div class="dropdown admonition">
<p class="admonition-title">CRIB</p>
<p>If <a class="reference external" href="https://www.docker.com/">Docker</a> is installed on CRIB, follow the same instructions as for the Local device.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Snellius</p>
<p><a class="reference external" href="https://www.docker.com/">Docker</a> option is not available on Snellius. You need to use <a class="reference external" href="https://apptainer.org/docs/user/main/introduction.html">Apptainer</a>, see instructions <a class="reference external" href="https://servicedesk.surf.nl/wiki/spaces/WIKI/pages/30660251/Apptainer+formerly+Singularity">here</a>.</p>
</div>
</div>
</section>
<section id="example-workflow-of-running-the-model">
<h2><span class="section-number">1.3.2. </span>Example workflow of running the model<a class="headerlink" href="#example-workflow-of-running-the-model" title="Permalink to this heading">#</a></h2>
<ol class="arabic simple">
<li><p>Download the <a class="reference external" href="https://github.com/EcoExtreML/STEMMUS_SCOPE/releases">latest version of the model</a>.</p></li>
<li><p>Download the example dataset from Zenodo <a class="reference external" href="https://zenodo.org/records/10566827">here</a> that includes the configuration file.</p></li>
<li><p>Choose one of the options above to run the model.</p></li>
</ol>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./Semmus_Scope"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Getting%20started.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">1.2. </span>Getting started</p>
      </div>
    </a>
    <a class="right-next"
       href="Contributing%20guide.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">1.4. </span>Contributing guide</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#workflow-of-stemmus-scope">1.3.1. Workflow of STEMMUS_SCOPE</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-workflow-of-running-the-model">1.3.2. Example workflow of running the model</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By TU Delft
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>